<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<!--
`country-select`
A simple country selector using the paper-dropdown-menu

@demo demo/index.html 
-->
<dom-module id="country-select">
  <template>
    <style>
    :host {
      display: block;
    }
    </style>
    <iron-ajax auto url="{{resolveUrl('countryCodes.json')}}" handle-as="json" last-response="{{_codes}}"></iron-ajax>
    <paper-dropdown-menu label="{{label}}">
      <paper-listbox class="dropdown-content" attr-for-selected="value" selected="{{selectedItem}}">
        <template is="dom-repeat" items="{{_codes.codes}}">
          <paper-item value="[[item]]">[[localize(item)]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>
  </template>
  <script>
  Polymer({

    is: 'country-select',
    behaviors: [
      Polymer.AppLocalizeBehavior
    ],
    properties: {
      label: {
        type: String,
        value: 'Country'
      },
      selectedItem: {
        type: Object,
        notify: true
      },
      language: {
        type: String,
        value: 'en'
      },
      _codes: {
        type: Object
      }
    },
    attached: function() {
      this.loadResources(this.resolveUrl('countries.json'));
    }
  });
  </script>
</dom-module>
